CREATE EXTENSION IF NOT EXISTS wrappers WITH SCHEMA extensions;

CREATE FOREIGN DATA WRAPPER bigquery_wrapper
  HANDLER big_query_fdw_handler
  VALIDATOR big_query_fdw_validator;

CREATE SERVER bigquery_server
  FOREIGN DATA WRAPPER bigquery_wrapper
  OPTIONS (
    sa_key '
        {
            "type": "service_account",
            "project_id": "atscale-project",
            "private_key_id": "deea8a73a4ebcd40edf5cff0c0a8737e3d599a08",
            "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQC2kSClIpOm+bvH\n7qXQ29enjZVJg2Y+ESq/RLBY28kVq4WcPi6Nbs1OkiOuJRwE1wtEW2111Rk03cBR\nNKlCo8t3S2r7Zt/QZ4QZKpkIyQelVDxyBTww2mK4W15ntvtWuGJOMwOZerW3qlmr\nLprKQUxA+oJxflBdsIbS619PvktQrqiOWHRWG+r5XKWXIMy/Db67i5+DwKsJDBW3\nLyyoF99C/eZgjLnZpi3RozR9T19z3z+vNHN+oL6gd8WV0bqEXkwmsBS1C40IMYWE\nZuo++m4yZfO7rQbykATAwX9YNglJAHSOjOiQU7OI2pH+0w3ymFxhk2RtIHOKUK3u\nI41aVujTAgMBAAECggEAFIPtc7EVf4N7twVZy8UQkEsINhkWca4TLCgnWuzjxVQf\ncQXJzGnhl00zxjt0URTrNrTBcabPLNIobNeql4r5b7/hVzvhtbUUMpHHXaXdfpYf\nLr7o2yKHSmk2DBiTWNTicyAnbOVNq0RwzBwyF71LuNeNtfw4Qrb2B5icfsUHCJtP\nTAn5jiKTcTemLQdaFFYL2Gw325HJzPXbMMLfoLCfC66nBZ7HcjjE0Hi+lwnorEWa\nhLV5SgvkkMYApZdHZYHXdoR7F6GtmeckZUmec7bN598PSx16xpuUTRWToLjXznq3\nviXXDUMrfOADIta7EEqsanmMgheO+x/R7mw+b5B8LQKBgQDcTFaXLj/Yhm3z/UcR\nib9IN81Kk4DgPy0aDMhtkgntxUYue1XzziNjHv/1Cjs+VFAcDrMAHJZ/fiaATZLu\nWyoEf4JJ9IYVbjGqosXRoALXeg/+OglU/TnUPYlAiZS5BhgWhCMNLstakptmcoiE\nZUyL8T3BVnkPo8jQmOa/uHg+1wKBgQDUJ2fH6aZPmfLnUYdO7/zsg1vgvRfAZ1Wi\nvfPP1sNEivRwd/u6qRyFyt1DLTDjFdniJKJD98A36lCGqkHtLJ6z7BPs/PHPbF3f\nxI0H0dTbpU4dVjr6+LasPWxT7oHe8g1LJw3Rv5+3QCHL32AcMSKzokU69Ll2rsNW\n3hqwnP0SZQKBgHC6n5S9Fe6224z/Dl7rHfbWlzaSRGB785hg8i8fi/Uf/cnLUzBv\nS6xtMI0zrx02B8hTvUVRW7Hh29HL4GQYQmgK16EAf5x3xvKKWK/sMYgR7h0plZzn\n96+jzZg4zuHfPHRJKaaVS3oNi3fhI/qb24/A4tkMZuaZ6SjVFT8GJoIBAoGAJN8M\nXGQxMVhyLN2whHmVHY3e4/o5LIlJCtW0kASlPz5fKUTRDSni+SW+urQZ8P2VNoZj\nZSij0ZP5ls30U0IT+vUmqWN0qzYMQp2oXRmMwvfB0btw2LltFhY+w3+KNrMeuFb7\nQd7p5TFSLlqOG5g2jb3ABnUN3qCU9n33aYZ/PTkCgYB2/S+tdCSOQdLoKTLXN9FY\nmkPqKT2W/Q6Q8i2Iobe8rUxS8vglPU0ex83p2N7C1E/gbaCCILJ1BVfXSPDl0j+0\nuXL47yBIeB8VEM1YCKqEnJ3HXVRlkxPGaGzZ4CEm4sn9lLNSfNWYfjI6mW8tWGUK\nuV+JwAjRuqAcVC/AMrly7A==\n-----END PRIVATE KEY-----\n",
            "client_email": "training-service-account@atscale-project.iam.gserviceaccount.com",
            "client_id": "116508320884730849758",
            "auth_uri": "https://accounts.google.com/o/oauth2/auth",
            "token_uri": "https://oauth2.googleapis.com/token",
            "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
            "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/training-service-account%40atscale-project.iam.gserviceaccount.com",
            "universe_domain": "googleapis.com"
        }',
    project_id 'atscale-project',
    dataset_id 'practice_dataset'
  );

